<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Dashed line moving along with mouse pointer</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
        <!-- <p id="info">window_size (x, y), point position (x, y), w position (x, y)</p> -->
		<script src="js/three.js"></script>
		<script>
         var scene, camera, renderer;
         var point

         var width = window.innerWidth;
         var height = window.innerHeight;
         var aspect = height / width;
         var r = 5.0;
         init();
         animate();

         function init(){
             renderer = new THREE.WebGLRenderer();
             renderer.setSize(width, height);
             document.addEventListener('mousemove', 
                                       onDocumentMouseMove, false);
             document.body.appendChild(renderer.domElement);
             scene = new THREE.Scene();
             setup_scene();
             camera = new 
             THREE.OrthographicCamera(-r, r,
                                      r * aspect, -r * aspect,
                                      1, 1000);
             camera.position.z = 5;
             scene.add(camera);
             console.log("end of initialization.");
         }

         function setup_scene(){
             var plane_geometry = new THREE.PlaneGeometry(4, 4);
             var mat_ivory = new THREE.MeshBasicMaterial({color: 0xffffdd});
             var plane = new THREE.Mesh(plane_geometry, mat_ivory);
             scene.add(plane);

             var point_geom = new THREE.CircleGeometry(0.05, 16);
             var mat_black = new THREE.MeshBasicMaterial({color: 0x000000});
             point = new THREE.Mesh(point_geom, mat_black);
             scene.add(point);
         }

         function onDocumentMouseMove(event){
			 var x = r * ((event.clientX / width) * 2 - 1);
			 var y = r * (-(event.clientY - height / 2) / width) * 2;
             console.log("x, y = " + x + ", " + y);
             point.position.set(x, y, 0);
		 }
         
         function render(){
             renderer.setViewport(0, 0, width, height);
	         renderer.render(scene, camera);
         }

         function update(){
         }

         function animate(){
	         requestAnimationFrame(animate);
             render();
             update();
         }
		</script>
	</body>
</html>
