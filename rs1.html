<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Enneper's Rieman Surface</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
        <p id="info">window_size (x, y), point position (x, y), mouse position (x, y)</p>
		<script src="js/three.js"></script>
		<script>
         var container, mouse, scene, camera, renderer;
         var point;
         var width = window.innerWidth;
         var height = window.innerHeight;
         var r = 4.0;

         init();
         animate();

         function init(){
             mouse = new THREE.Vector2();
             scene = new THREE.Scene();
             var aspect = width/height;
             camera = new 
             /* THREE.PerspectiveCamera(75, window.innerWidth 
              *     / window.innerHeight, 0.1, 1000 );*/
             THREE.OrthographicCamera(-r*aspect, r*aspect, r, -r, 1, 1000);
             raycaster = new THREE.Raycaster();
             renderer = new THREE.WebGLRenderer();
             renderer.setSize(width, height);
             /* projector = new THREE.Projector();*/
             container = document.getElementById('ThreeJS');
             document.addEventListener('mousemove', 
                                       onDocumentMouseMove, false);
             document.body.appendChild( renderer.domElement );
             var geometry = new THREE.PlaneGeometry(4, 4);
             var circle_geom = new THREE.CircleGeometry(0.1, 16);
             var material = new THREE.MeshBasicMaterial({color: 0xffeeff});
             var material2 = new THREE.MeshBasicMaterial({color: 0xBBBBff});
             var mat_black = new THREE.MeshBasicMaterial({color: 0x000000});
             var w_plane = new THREE.Mesh(geometry, material);
             var xy_plane = new THREE.Mesh(geometry, material2);
             point = new THREE.Mesh(circle_geom, mat_black);
             w_plane.position.x -= 2.5;
             xy_plane.position.x += 2.5;
             point.position.x -= 2.5;
             scene.add(w_plane);
             scene.add(xy_plane);
             scene.add(point);
             camera.position.z = 5;
             console.log("end of initialization.");
         }
         
         function onDocumentMouseMove(event){
			 /* event.preventDefault();*/
             /* convert to cartesian coordinate */
             /* center = (0, 0), positive dir = up, right */
			 mouse.x = r * ((event.clientX / width) * 2 - 1);
             /* -r <= mouse.x < r */
			 mouse.y = r * (-(event.clientY - height / 2) / width) * 2;
             /* -r/aspect  <= mouse.y < r/aspect */
             point.position.set(mouse.x, mouse.y, 0);
             document.getElementById("info").innerHTML = 
                 "window size = (" + width + ", " + height + "), " +
                 "event x: " + event.clientX + ", y: " + event.clientY +
                 ", mouse x: " + mouse.x + ", y: " + mouse.y;
             
		 }
         
         function render(){
	         renderer.render(scene, camera);
         }

         function update(){
         }

         function animate(){
	         requestAnimationFrame(animate);
             render();
             update();
             /* cube.rotation.x += 0.01;
              * cube.rotation.y += 0.01;*/
         }
		</script>
	</body>
</html>
